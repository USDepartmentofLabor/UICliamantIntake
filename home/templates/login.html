{% extends "base.html" %} {% load i18n %} {% block content %}
<main role="main">
  <div class="grid-container">
    <h1>{% translate "Test Login" %}</h1>
    <div class="grid-row">
      <form class="usa-form usa-form--large" action="/login/" method="POST">
        <input
          type="hidden"
          name="csrfmiddlewaretoken"
          value="{{ csrf_token }}"
        />
        <fieldset class="usa-fieldset">
          <legend class="usa-legend usa-legend--large"></legend>
          <div class="clearfix"></div>

          <p>
            Required fields are marked with an asterisk (<abbr
              title="required"
              class="usa-hint usa-hint--required"
              >*</abbr
            >).
          </p>

          <script type="text/javascript">
            const IAL2_REQUIRED = ["phone", "ssn", "birthdate", "first_name", "last_name", "address.address1", "address.city", "address.state", "address.zipcode"];
            function toggleRequiredFields(ial) {
              IAL2_REQUIRED.forEach((field) => {
                const input = document.getElementById(field);
                const label = input.labels[0];
                if (ial === "1") {
                  input.required = false;
                  label.classList.remove("required");
                  label.getElementsByTagName("abbr")[0].classList.add("display-none");
                } else if (ial === "2") {
                  input.required = true;
                  label.classList.add("required");
                  label.getElementsByTagName("abbr")[0].classList.remove("display-none");
                }
              });
            }
          </script>

          {% include "uswds/_swa_options.html" with swas=swas swa=swa onchange=False %}
          {% include "uswds/_text_field.html" with id="first_name" label="First Name" type="text" required=True %}
          {% include "uswds/_text_field.html" with id="last_name" label="Last Name" type="text" required=True %}
          <label class="usa-label" for="IAL"
            >Identity Assurance Level (IAL)</label
          >
          <select
            name="IAL"
            class="usa-select"
            onchange="toggleRequiredFields(this.value)"
          >
            <option selected value="2">2</option>
            <option value="1">1</option>
          </select>

          {% include "uswds/_text_field.html" with id="email" label="Email" required=True type="email" %}
          {% include "uswds/_text_field.html" with id="birthdate" label="Birthdate (YYYY-MM-DD)" type="text" required=True %}
          {% include "uswds/_text_field.html" with id="ssn" label="SSN" type="text" required=True %}
          {% include "uswds/_text_field.html" with id="phone" label="Phone" type="text" required=True %}
          {% include "uswds/_text_field.html" with id="address.address1" label="Address (1)" type="text" required=True %}
          {% include "uswds/_text_field.html" with id="address.address2" label="Address (2)" type="text" required=False %}
          {% include "uswds/_text_field.html" with id="address.city" label="City" type="text" required=True %}
          {% include "uswds/_dropdown.html" with options=states label=_("Select your state") default_option=None id="address.state" onchange=False required=True %}
          {% include "uswds/_text_field.html" with id="address.zipcode" label="ZIP code" type="text" required=True %}

          <div>
            <button class="usa-button" type="submit" data-testid="loginbutton">
              Login
            </button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</main>
{% endblock %}
